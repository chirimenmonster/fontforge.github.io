---
published: true
layout: default.ja
title: メトリックビュー
---


[table_of_contents]


![](/assets/img/dialogs1-MetricsView.png)

メトリックビューでは、複数のグリフがどのように見えるかを確認したり、
それらの間の間隔を変更したりすることができます。
さまざまな OpenType の機能をこれらのグリフに適用し、
見た目の変化を確認することができます。

メトリックビューがフォントビューから作成された場合、
選択していたグリフ（最初の15個など）は、
選択された順序でビューに表示されます。
メトリックビューがアウトラインまたはビットマップグリフビューから作成された場合、
そのグリフのみが表示されます。
メトリックビューがビットマップグリフビューから作成された場合
（またはそのビューがビットマップフォントを表示しているときにフォントビューから作成された場合）、
メトリックビューにはビットマップが表示されますが、
ビットマップのメトリックは編集できません（アウトラインを表示するビューでメトリックの編集を行う必要があります）。

メニューバーの下には、一連のフィールドがあります。
最初は、選択した機能の中でどのルックアップを適用するかを決める文と言語の現在の組み合わせを示し、
次は、表示のための追加のユニコード文字を入力するテキストフィールドであり、
最後に、ルックアップサブテーブルのプルダウンリストがあります。
このテーブルはカーニングペアを作成する場合に使用されます（カーニングペアはそのサブテーブルの一部になります）。
その下には、フォントで定義されているすべての機能を示すリストがあります。
この画面でアクティブにするものを選択できます。
（注： 機能はアルファベット順に並んでいます。
ルックアップが実行される順序ではありません（大抵はその順序ではありません））。

文字を入力するときに、タイプして入力することはできません:

1.  フォントビューで文字（またはグリフ）を選択し、
    適切な場所のメトリックスビューにドラッグ&ドロップします
2.  ビューメニューを使用して、文字またはグリフを変更または挿入します
    （表示->グリフを挿入）
3.  メトリックビューを開く前に、フォントビューで文字を個別に順番に選択します。
    メトリックビューを開いたときに選択した順序で表示されます
4.  FontForgeには独自の風変わりな
    [入力メソッド](#非-ascii-文字の入力)
    があります


ビューの中央部分は、表示されているグリフで占められます。
アウトライングリフの場合、フォントの em-height がこの領域にちょうど収まるようにこれらのサイズが設定されます。
グリフの間に灰色の線があり、右側のグリフの原点と左側のグリフの幅を示しています。
ベースラインも灰色で描画されます。

メトリックビューは、3つのモードのいずれかになります（メトリック->ウィンドウタイプ）。

-   カーニングのみ -- 任意のペア間のカーニングを調整できます。
    グリフは表示されていますが、送り幅は設定できません
-   送り幅のみ -- 表示されている任意のグリフの送り幅を調整できます。
    カーニングは設定できません
-   両方 -- 以下を参照してください

グリフうちの1つがアクティブになります。
そのグリフには、左側（原点）に緑色の線があり、右側（幅）に青色の線があります。
この線をドラッグして幅を変更できます。
グリフをクリックして左または右にドラッグすると、グリフの左側のベアリング (lbearing) を変更できます。
緑色の線をドラッグして、このグリフとその左のグリフの間のカーニングを変更できます。
（小さなピクセルサイズの [デバイステーブル](#デバイステーブル) を作成する場合は、
[カーニングペアクローズアップダイアログ](#kern-pair-closeup) を使用する必要があります）


カーニング

![](/assets/img/dialogs1-To-unkerned.png) ![](/assets/img/dialogs1-To-kerned.png)

グリフをクリックしてアクティブなグリフを変更できます。

矢印キーの up、down は、フィールドの値を1ずつ増加、減少させます。
Shift-up または -down で増減は10ずつになり、
Ctrl-Shift-up または -down では5ずつにになります。
Alt-up、-down、-left、-right を押すと、カーソルが上、下、左、右のフィールドに移動します。

表示領域の下には、テキストフィールドのセットがあります。
これらのフィールドのいずれかに新しい数値を入力して、グリフの対応するメトリックを変更できます。

単語のリストをメトリックビューに読み込むことができると便利な場合があります（1文字ずつ入力する必要がなくなります）。
テキスト入力フィールドにはプルダウンリストがあり、このリストの下部には、ファイルから単語リストを読み込むためのエントリがあります。
一度ファイルを選択すると、プルダウンリストに選択肢が表示されるようになります。
上下矢印キーを使用して、単語リスト内を移動できます。

表示される最初のグリフがヘブライ語やアラビア語（または他の右から左の言語）である場合、
表示領域全体が右から左に表示されます


**注** 右から左、左から右への記述方向を混在して表示するために Unicode 仕様で規定されている非常に複雑なアルゴリズムがあります。
ここではそれに従いません。
記述方向の決定は、最初のグリフのみによって行われます。


![](/assets/img/dialogs1-VerticalMetrics.png)

![](/assets/img/dialogs1-HebrewMetrics.png)

View->Vertical により、垂直メトリックとカーニングする表示ウィンドウを生成できます。
（これは、フォントで垂直メトリックが有効になっている場合にのみ使用できます。
Element->Font Info->General->Has Vertical Metrics.
このモードでは、垂直幅、垂直カーニングなどを変更できます。

表示されているグリフのいずれかをダブルクリックすると、
FontForge はアウトライングリフビューを表示して、そのグリフを編集できるようにします。

![](/assets/img/dialogs1-MetricsView-features.png)

左の例では、入力テキストは "f" の後に "i" が続いており、
'liga' 機能がオンになると、これは "fi" の合字になります。
次に、"a" の後に "b" が続きますが、
'smcp' （スモールキャップ） 機能がオンになっているため、
これらは小文字ではなくスモールキャピタル文字になります。
最後に "1", "/", "2" が入力され、
'frac' （対角分数）機能がオンになると、
これら3つの入力グリフは出力時には「1/2」のグリフになります。

注： このウィンドウは完全なレイアウトエンジンではありません。
すべてのグリフは同じ文の中にあるかのように扱われ、すべての機能がすべてのグリフに適用されます。
ベースラインの位置合わせは行われません。

### 非 ASCII 文字の入力

私たちのほとんどは、ASCII 文字しか持たないキーボードにこだわっています。
あったとしても、せいぜい ISO 8859-1 文字のサブセットくらいです。
Unicode 文字の全範囲を入力するにはどうすればよいでしょうか?

X Window System は、スタンドアロンの
[インプットメソッドサーバ](../../reference/xim/)
によって文字を入力する洗練されたメカニズムを提供しています。
FontForge は現在、これをある程度サポートしています。

それとは別に、X Window System の多くのバージョンは、
"Compose Character" キーか、またはそれと同等のものを提供しています。
X Window System のソフトウェアは、ネイティブなエンコーディングが何であったとしても、
キーストロークのシーケンスを1つの文字にマッピングします。

使用しているキーボードにそうしたキーがない場合、
使用している X Window System でこれらが提供されていない場合に備えて、
そうした方針に沿ったうえで、安価なキーボードが利用できるような仕組みを実装しました。
テキスト入力が可能なモードの場合に、F12キーを押してから一連のキーストロークを実行してください。
アクセント付き文字は以下のように作成することができます:

    `   グレイブ・アクセント (grave accent)
    0   リング符号 (ring)
    "   ダブルグレイブ（またはトノス） (double grave (or tonos))
    '   アキュート・アクセント (acute accent)
    /   ストローク符号 (slash)
    .   上付きドット符号 (dot above)
    :   ダイエレシス（ウムラウト） (diaeresis (umlaut))
    7   ブレーヴェ (breve)
    ,   下付きドット符号 (dot below)
    ^   サーカムフレックス (circumflex)
    6   ハーチェク (caron)
    5   セディーユ (cedilla)
    ~   チルダ (tilde)
    _   マクロン (macron)
    4   オゴネク (ogonec)

したがって、 Â は [F12] ^ A で作成でき、
ダイエレシスとマクロンを含む A は [F12] ： \_ A で作成できます。

ギリシャ文字も作成できます。
開始は [F12] @ で続いて以下を入力します：

    A   Alpha                     
    B   Beta            
    C   Chi
    D   Delta                     
    E   Epsilon         
    F   Phi
    G   Gamma                     
    H   Eta             
    I   Iota
    J   (technical) Theta         
    K   Kappa           
    L   Lamda
    M   Mu                        
    N   Nu              
    O   Omicron
    P   Pi                        
    Q   Theta           
    R   Rho
    S   Sigma                     
    T   Tau             
    U   Upsilon
    V   final sigma               
    W   Omega           
    X   Xi
    Y   Psi                       
    Z   Zeta                

これは Symbol フォントで使用されるマッピングです。
（小文字も同様に作成されます。 [F12] @ a は小文字のアルファを生成します）
アクセント付きのギリシャ文字も作成することができ、
[F12] @ \" A は、トノス付きのアルファを生成します。


最後になりますが、次の特殊文字を作成できます:

    [F12] <space>   <no break space>          
    [F12] *         °                              
    [F12] @ *       <bullet>
    [F12] @ <space> <em space>
    [F12] #         £
    [F12] @ #       ¥
    [F12] $         <euro>
    [F12] @ $       ¢                              
    [F12] !         ¡
    [F12] +         ±                         
    [F12] -         <soft-hyphen>
    [F12] @ -       <en dash>
    [F12] @ .       ·                           
    [F12] 7 2       ½                              
    [F12] ;         . . .
    [F12] <         <less or equal>
    [F12] >         <greater or equal>           
    [F12] @ >       <triangle bullet>
    [F12] =         <quote dash>              
    [F12] ?         ¿                              
    [F12] A         Å
    [F12] C         Ç                           
    [F12] H         <right index>                
    [F12] O         <OE lig>
    [F12] P         §                           
    [F12] [         <single right quote>         
    [F12] ]         <single right quote>
    [F12] \         «                           
    [F12] @         <single guillemot>           
    [F12] a         å
    [F12] c         ç                           
    [F12] f         <female sign>                
    [F12] g         ©
    [F12] h         <left index>              
    [F12] m         <male sign>                  
    [F12] o         <oe lig>
    [F12] p         ¶                           
    [F12] r         ®                              
    [F12] s         ß
    [F12] t         TM                          
    [F12] z         <long s>                     
    [F12] {         <left dbl quote>
    [F12] }         <right dbl quote>         
    [F12] |         »                              
    [F12] @ |       <right single guillemot>

ここには、まだほとんどの unicode 文字を見つけることができません。
ですが、 [F12] を2回押すとダイアログが表示され、
unicode の任意の文字を選択することができます。

誤って [F12] をタイプすると、エスケープによりアクセントモードが終了します。


### クラスを用いたカーニング

多くの場合、同じようなカーニングをするグリフのクラスを作成することをお勧めします。
たとえば、
A, À, Á, Â, Â, Ã, Ä
はおそらくすべて同じようなカーニング
（ただし、 o と ô はおそらく T の後ではかなり異なったカーニングをすることに注意してください）
をします。
上記の各 "A" について別々のカーニングペアを作成するよりも、
そのすべてを同様なカーニングをするグリフのクラスとして配置したほうがよいです。

そのためのインターフェースが
[Element->Font Info->Lookups](../lookups/)
で提供されています。

![](/assets/img/dialogs1-kerningformat.png)

すべての GPOS ルックアップ（カーニングはその1つです）とそのサブテーブルを示すダイアログが表示されます。
カーニングクラスの各セットは、それ自身のサブテーブルに存在します。 カーニングサブテーブルを作成すると、
個々のカーニングペアのセットが必要か、カーニングクラスに基づくマトリクスが必要かが尋ねられます。

後者を選択した場合、 FontForge は適切なクラスのセットを推測しようとします（選択されたグリフを見て、複数のクラスに分割します）。
`Intra Class Distance` を使用すると、
クラスに入るものについて、気難しい FontForge がどのようになるかをある程度制御できます。
（これは em 単位、おおまかにいうと、
2つの異なるグリフが他のグリフとどのように相互作用するかについての平均誤差として解釈されます）。
値が 1 のときは非常にえり好みが激しく、ほとんどすべてのクラスはメンバーが1つとなります。
値が 20 （1000 em フォントに対して）の場合はかなり緩いです。

AutoKerning では、 `Default Separation` と `Min Kern` フィールドが使用されます。
すべてのグリフ間の視覚的な間隔を一定にするというカーニングの目標に対して、
`Default Separation` フィールドはその望ましい値を指定します。
`Min Kern` の値は、単にダイアログが無駄なゴミでいっぱいになるのを防ぐためのものです。
AutoKerning が2つのグリフを 1 em 単位でカーニングすることを提案している場合、
人間の目には違いがわからないので、それを含める意味はありません。
そのため、 AutoKern によって提案されたカーニングの値（絶対値）が `Min Kern` より小さい場合、
FontForge はその値を無視します。
`[] Touching` を選択すると、
AutoKerning の動作は少し異なり、
視覚的距離を目標値にしようとするのではなく、
最小間隔を目標値にしようとします
（これはめったに役立ちませんが、たまに、文字どうしが実際に接触するようなテキストが望まれることがあります）。
`[] Only kern glyphs closer`　のフラグは、
FontForge が負のカーニングオフセットのみを、
つまりグリフを互いに近づけるようなオフセットのみを生成することを意味します。

![](/assets/img/dialogs1-kerningclass.png)

各カーニングクラスは
[ルックアップサブテーブル](../lookups/)
に属し、サブテーブル名がダイアログの上部に表示されます。

しかし、より興味深いものを次に示します。
クラスによるカーニングは、実際には2セットのクラスで構成されます。
1セットは最初のグリフを含むセット、もう1セットはペアとなるの2番目のグリフを含むセットです。
グリフクラスは、空白で区切られたグリフ名のリストで構成されます
（大抵のグリフでは、 unicode 文字自体を入力することができ、
FontForge はそれをグリフ名に変換します）。

クラスの編集は、クラスをタイプするだけです
（クラスリストの一番下に \<New\> というエントリがあり、
ここをクリックすると、新しいクラスが作成されます）。
クラスの右側にある小さな長方形を押すと、クラスをフォントビューウィジェットの選択項目として定義できます。
クラスを削除するには、クラスを選択（クリック）して [削除] ボタンを押します。

カーニングクラスはかなり複雑になる場合があります。
"Select Glyph" フィールドに名前を入力して、グリフを検索できます。
これにより、そのグリフを含むクラスが強調表示されます。

クラス0はたいてい呪文のようなものです。 
設定することはほとんどなく、他の場所で言及されていないグリフが含まれています。
OpenTypeでは、最初の文字のクラス0を設定でき、正常に動作します。

クラスの下には、カーニング値の表示があります。
可能な最初のグリフクラスは垂直にリストされ、可能な2番目のグリフクラスは水平にリストされます。
クラスを選択すると（上記のクラスリストのいずれかで）、カーニング値の表示がスクロールしてそのクラスが表示されます。
マウスをディスプレイに移動して静止させると、ポップアップウィンドウが表示され、そのポイントで交差するクラスを構成するグリフが表示されます。
ディスプレイでカーニング値をクリックすると、
dlg がカーニングの視覚的な量を表示します。

カーニングダイアログには、各クラスの代表的なグリフが表示され、
グリフ間（そして各クラスの他のすべてのクラスメンバー間）のカーニングを調整できます。
プルダウンメニューで表示するグリフを選択できます。
値を入力して新しいカーニングオフセットを入力するか、カーニングペアの2番目のグリフをクリックしてドラッグします。


### デバイステーブル

"デバイステーブル" と呼ばれるものを作成することもできますが、
この名前はあまり的を射たものではありません。
フォントが小さなピクセルサイズでラスタライズされると、丸め誤差が重要になってきます。
これは特にカーニングに当てはまります。
丸められるのは次の3つ、
アウトラインの位置（ピクセルグリッドに合わせるため）、
グリフの前進幅、
そして、カーニング値そのものです。
したがって、150 ピクセルでは完璧にカーニングされているように見えるものが、
12 ピクセルでは近すぎるか離れすぎている、という可能性があります。

![](/assets/img/dialogs1-kern-We-150.png)

150 ピクセルでのカーニング

![](/assets/img/dialogs1-kern-We-12.png)

12 ピクセルでのカーニング（2倍に拡大したもの）

もちろん、12 ピクセルで正しく見えるようになるまでカーニング値を微調整できますが、
それによって 14 ピクセルでは崩れてしまうかもしれません。
そのため、 OpenType には、特定のポイントサイズで小さな修正を追加するようなデバイステーブルの概念があります。
表示サイズを小さいがよく使う値（10〜24など）に設定し、カーニングを調べます。
結果が良い場合は、 "Device Table Correction" フィールドに値を入力し、
それにより、指定された表示サイズについてはそのピクセル数だけ間隔が変更されます（他の表示サイズについては変更されません）。
上記の場合、12px の表示では 1 の修正が適切かもしれません。

小さなピクセルサイズを調べるのは難しいため、
倍率を変更できます（同じサイズでラスタライズされますが、各ピクセルは2倍になります）。


### Kern Pair Closeup

[デバイステーブル](#デバイステーブル) は、他の多くの場面でも作成できます。
上記の例はカーニングクラス用です。
カーニングペアは、
上記の Kerning Class ダイアログに似た
Metrics->Kern Pair Closeup ダイアログを使用して、
テーブルをアタッチすることもできます。

![](/assets/img/dialogs1-kernpairclose.png)
